
{% load static %}
{% include "includes/adminheader.html" %}
<div class="row">
    <div class="col-xl-6 d-flex">
        <div class="card flex-fill">
            <div class="card-header">
                <h4 class="card-title">Add New Doctor</h4>
            </div>
            <div class="card-body">

                
                    <form method="POST" class="needs-validation" novalidate>
                        {% csrf_token %}
                        <div class="mb-3">
                            <label for="email">Email</label>
                            <input type="email" class="form-control" id="email" name="email" placeholder="Email" required>
                            <div class="invalid-feedback">
                                Please provide a valid email.
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="name">Name</label>
                            <input type="text" class="form-control" id="name" name="name" placeholder="Name" required>
                            <div class="invalid-feedback" id="name-error">
                                Please enter a valid name (alphabets only, maximum length: 15).
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="phone_number">Phone Number</label>
                            <input type="text" class="form-control" id="phone_number" name="phone_number" placeholder="Phone Number" required>
                            <div class="invalid-feedback" id="phone-error">
                                Please provide a valid phone number (starting with 6, 10 digits, no repeating digits).
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="register_number">Register Number</label>
                            <input type="text" class="form-control" id="register_number" name="register_number" placeholder="Register Number" required>
                            <div class="invalid-feedback" id="register-error">
                                Please provide a valid register number.
                            </div>
                        </div>
                        
                        <button type="submit" class="btn btn-primary">Add Doctor</button>
                    </form>
                </div>
                
                <script>
                    (function() {
                        'use strict';
                        
                        var forms = document.querySelectorAll('.needs-validation');
                        
                        Array.prototype.slice.call(forms)
                            .forEach(function(form) {
                                form.addEventListener('submit', function(event) {
                                    if (!form.checkValidity()) {
                                        event.preventDefault();
                                        event.stopPropagation();
                                    } else {
                                        // Submit the form if it is valid
                                        form.submit();
                                    }
                                    form.classList.add('was-validated');
                                }, false);
                            });
                
                        // Custom real-time validation for email field
                        var emailInput = document.getElementById('email');
                        var emailError = document.querySelector('#email + .invalid-feedback');
                        emailInput.addEventListener('input', function() {
                            var email = emailInput.value.trim();
                
                            var valid = true;
                
                            // Check if only contains one "@" and one ".", doesn't start or end with a dot
                            if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email) || email.startsWith('.') || email.endsWith('.')) {
                                valid = false;
                                emailError.textContent = 'Please provide a valid email.';
                            } else {
                                emailError.textContent = '';
                            }
                
                            emailInput.setCustomValidity(valid ? '' : 'invalid');
                        });
                
                        // Custom real-time validation for name field
                        var nameInput = document.getElementById('name');
                        var nameError = document.getElementById('name-error');
                        nameInput.addEventListener('input', function() {
                            var name = nameInput.value.trim();
                
                            var valid = true;
                
                            // Check if only contains alphabets
                            if (!/^[a-zA-Z]*$/.test(name)) {
                                valid = false;
                                nameError.textContent = 'Please enter a valid name (alphabets only.';
                            }
                            // Check if it has a maximum length of 15 characters
                            else if (name.length > 15) {
                                valid = false;
                                nameError.textContent = 'Name must be less than 15 characters.';
                            } else {
                                nameError.textContent = '';
                            }
                
                            nameInput.setCustomValidity(valid ? '' : 'invalid');
                        });
                
                        // Custom real-time validation for phone number field
                        var phoneInput = document.getElementById('phone_number');
                        var phoneError = document.getElementById('phone-error');
                        phoneInput.addEventListener('input', function() {
                            var phoneNumber = phoneInput.value.trim();
                
                            var valid = true;
                
                            // Check if it starts with 6
                            if (!(phoneNumber.charAt(0) >= '6')) {
                                valid = false;
                                phoneError.textContent = 'Invalid phone number.';
                            }
                            // Check if only contains digits and has 10 digits
                            else if (!/^\d{10}$/.test(phoneNumber)) {
                                valid = false;
                                phoneError.textContent = 'Please provide a valid phone number.';
                            }
                            // Check if all digits are not the same
                            else if (/^(\d)\1+$/.test(phoneNumber)) {
                                valid = false;
                                phoneError.textContent = 'Phone number cannot have repeating digits.';
                            } else {
                                phoneError.textContent = '';
                            }
                
                            phoneInput.setCustomValidity(valid ? '' : 'invalid');
                        });
                
                        // Custom real-time validation for register number field
                        var registerInput = document.getElementById('register_number');
                        var registerError = document.getElementById('register-error');
                        registerInput.addEventListener('input', function() {
                            var registerNumber = registerInput.value.trim();
                
                            var valid = true;
                
                            // Add custom validation for register number if needed
                
                            registerInput.setCustomValidity(valid ? '' : 'invalid');
                        });
                        // Custom real-time validation for register number field
        var registerInput = document.getElementById('register_number');
        var registerError = document.getElementById('register-error');
        registerInput.addEventListener('input', function() {
            var registerNumber = registerInput.value.trim();

            var valid = true;

            // Check if the register number meets the criteria
            if (!/^[a-zA-Z0-9]{6,12}$/.test(registerNumber)) {
                valid = false;
                registerError.textContent = 'Please provide a valid register number.';
            } else {
                registerError.textContent = '';
            }

            registerInput.setCustomValidity(valid ? '' : 'invalid');
        });
                    })();
                </script>
                


