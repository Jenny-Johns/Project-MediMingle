
{% load static %}
{% include "includes/adminheader.html" %}
<div class="row">
    <div class="col-xl-6 d-flex">
        <div class="card flex-fill">
            <div class="card-header">
                <h4 class="card-title">Add New Doctor</h4>
            </div>
            <div class="card-body">

                
                    <form method="POST" class="needs-validation" novalidate>
                        {% csrf_token %}
                        <div class="mb-3">
                            <label for="email">Email</label>
                            <input type="email" class="form-control" id="email" name="email" placeholder="Email" required>
                            <div class="invalid-feedback">
                                Please provide a valid email.
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="name">Name</label>
                            <input type="text" class="form-control" id="name" name="name" placeholder="Name" required>
                            <div class="invalid-feedback" id="name-error">
                                Please enter a valid name (alphabets only, maximum length: 15).
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="phone_number">Phone Number</label>
                            <input type="text" class="form-control" id="phone_number" name="phone_number" placeholder="Phone Number" required>
                            <div class="invalid-feedback" id="phone-error">
                                Please provide a valid phone number (starting with 6, 10 digits, no repeating digits).
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="register_number">Register Number</label>
                            <input type="text" class="form-control" id="register_number" name="register_number" placeholder="Register Number" required>
                            <div class="invalid-feedback" id="register-error">
                                Please provide a valid register number.
                            </div>
                        </div>
                        
                        <button type="submit" class="btn btn-primary">Add Doctor</button>
                    </form>
                </div>
                
                <script>
                    (function() {
                        'use strict';
                        
                        var forms = document.querySelectorAll('.needs-validation');
                        
                        Array.prototype.slice.call(forms)
                            .forEach(function(form) {
                                form.addEventListener('submit', function(event) {
                                    if (!form.checkValidity()) {
                                        event.preventDefault();
                                        event.stopPropagation();
                                    }
                                    form.classList.add('was-validated');
                                }, false);
                            });
                
                        // Custom real-time validation for name field
                        var nameInput = document.getElementById('name');
                        var nameError = document.getElementById('name-error');
                        nameInput.addEventListener('input', function() {
                            var name = nameInput.value.trim();
                
                            var valid = true;
                
                            // Check if only contains alphabets
                            if (!/^[a-zA-Z]*$/.test(name)) {
                                valid = false;
                                nameError.textContent = 'Please enter a valid name (alphabets only, maximum length: 15).';
                            }
                            // Check if it has a maximum length of 15 characters
                            else if (name.length > 15) {
                                valid = false;
                                nameError.textContent = 'Name must be less than 15 characters.';
                            } else {
                                nameError.textContent = '';
                            }
                
                            nameInput.setCustomValidity(valid ? '' : 'invalid');
                        });
                
                        // Custom real-time validation for phone number field
                        var phoneInput = document.getElementById('phone_number');
                        var phoneError = document.getElementById('phone-error');
                        phoneInput.addEventListener('input', function() {
                            var phoneNumber = phoneInput.value.trim();
                
                            var valid = true;
                
                            // Check if it starts with 6
                            if (!phoneNumber.startsWith('6')) {
                                valid = false;
                                phoneError.textContent = 'Phone number must start with 6.';
                            }
                            // Check if only contains digits and has 10 digits
                            else if (!/^\d{10}$/.test(phoneNumber)) {
                                valid = false;
                                phoneError.textContent = 'Please provide a valid phone number (10 digits).';
                            }
                            // Check if all digits are not the same
                            else if (/^(\d)\1+$/.test(phoneNumber)) {
                                valid = false;
                                phoneError.textContent = 'Phone number cannot have repeating digits.';
                            } else {
                                phoneError.textContent = '';
                            }
                
                            phoneInput.setCustomValidity(valid ? '' : 'invalid');
                        });
                
                        // Custom real-time validation for register number field
                        var registerInput = document.getElementById('register_number');
                        var registerError = document.getElementById('register-error');
                        registerInput.addEventListener('input', function() {
                            var registerNumber = registerInput.value.trim();
                
                            var valid = true;
                
                            // Add custom validation for register number if needed
                
                            registerInput.setCustomValidity(valid ? '' : 'invalid');
                        });
                    })();
                </script>
                
                </body>
                </html>
                

{% if messages %}
    <ul class="messages">
        {% for message in messages %}
            <h4{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</h4>
        {% endfor %}
    </ul>
{% endif %}

<script>
    (function() {
        'use strict';
        
        var forms = document.querySelectorAll('.needs-validation');
        
        Array.prototype.slice.call(forms)
            .forEach(function(form) {
                form.addEventListener('submit', function(event) {
                    if (!form.checkValidity()) {
                        event.preventDefault();
                        event.stopPropagation();
                    }
                    form.classList.add('was-validated');
                }, false);
            });

        // Custom validation for email field
        var emailInput = document.getElementById('email');
        emailInput.addEventListener('input', function() {
            var email = emailInput.value.trim();
            var atIndex = email.indexOf('@');
            var dotIndex = email.indexOf('.', atIndex);

            var valid = true;

            // Check for @ symbol
            if (atIndex === -1) {
                valid = false;
            }
            // Check if it starts with numbers
            if (/^\d/.test(email)) {
                valid = false;
            }
            // Check if more than one dot after @ symbol
            if (dotIndex !== -1 && dotIndex < atIndex + 2) {
                valid = false;
            }

            emailInput.setCustomValidity(valid ? '' : 'Please enter a valid email address.');
        });
    
    / Custom validation for phone number field
    var phoneInput = document.getElementById('phone_number');
    phoneInput.addEventListener('input', function() {
        var phoneNumber = phoneInput.value.trim();

        var valid = true;

        // Check if it starts with 6
        if (!phoneNumber.startsWith('6')) {
            valid = false;
        }
        // Check if only contains numbers and no special characters
        if (!/^\d+$/.test(phoneNumber)) {
            valid = false;
        }
        // Check if it has exactly 10 digits
        if (phoneNumber.length !== 10) {
            valid = false;
        }
        // Check if all digits are not the same
        if (/^(\d)\1+$/.test(phoneNumber)) {
            valid = false;
        }

        phoneInput.setCustomValidity(valid ? '' : 'Please enter a valid phone number.');
    });

    var nameInput = document.getElementById('name');
        nameInput.addEventListener('input', function() {
            var name = nameInput.value.trim();

            var valid = true;

            // Check if only contains alphabets
            if (!/^[a-zA-Z]+$/.test(name)) {
                valid = false;
            }
            // Check if it has a maximum length of 15 characters
            if (name.length > 15) {
                valid = false;
            }

            nameInput.setCustomValidity(valid ? '' : 'Please enter a valid name (alphabets only, maximum length: 15).');
        });
    })();

</script>


